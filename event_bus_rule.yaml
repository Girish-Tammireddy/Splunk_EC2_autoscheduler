EventRule: 
  Type: AWS::Events::Rule
  Properties: 
    Description: "EventRuleforLambdaInvoke"
    EventPattern: 
      source: 
        - "aws.ec2"
      detail-type: 
        - "EC2 Instance State-change Notification"
      detail: 
        state: 
          - "stopping"
          - "shutting-down"
          - "terminated"
        instance-id:  
        - i-5rytr7t8769889 ## reference to ec2 instance id - RemoteEC2InstanceID ##

    State: "ENABLED"
    Targets: 
      - 
        Arn: 
          Fn::GetAtt: 
            - "LambdaFunction"
            - "Arn"
        Id: "TargetFunctionV1"
PermissionForEventsToInvokeLambda: 
  Type: AWS::Lambda::Permission
  Properties: 
    FunctionName: 
      Ref: "LambdaFunctionName"
    Action: "lambda:InvokeFunction"
    Principal: "events.amazonaws.com"
